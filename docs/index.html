<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Index</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Index</h1>
    
    


    


    <h3> </h3>









    




    <section>
        <article><p><img alt="PAYMILL icon" src="https://static.paymill.com/r/335f99eb3914d517bf392beb1adaf7cccef786b6/img/logo-download_Light.png"/>
# PAYMILL-JS (beta)</p>

<p>[<img alt="Dependency Status" src="https://david-dm.org/paymill/paymill-js.png)](https://david-dm.org/paymill/paymill-js"/>
[<img alt="devDependency Status" src="https://david-dm.org/paymill/paymill-js/dev-status.png)](https://david-dm.org/paymill/paymill-js#info=devDependencies"/>
[<img alt="NPM version" src="https://badge.fury.io/js/paymill-wrapper.png)](http://badge.fury.io/js/paymill-wrapper"/>
&lt;!--
[<img alt="Build Status" src="https://travis-ci.org/paymill/paymill-js.png?branch=master)](https://travis-ci.org/paymill/paymill-js"/>
[<img alt="NPM version" src="https://badge.fury.io/js/paymill.node.js.png)](http://badge.fury.io/js/paymill-wrapper"/>
--&gt;
An universal JavaScript API wrapper. Works with <a href="http://nodejs.org/">Node</a>, <a href="http://www.parse.com">Parse</a> and potentially any other javascript-based backend.</p>

<p><strong>Note:</strong> The wrapper is still in beta. Please open an issue and let us know if you find any bugs, have a feature request or have successfully integrated it into your project.</p>

<h2>Getting started</h2>

<ul><li>If you are not familiar with PAYMILL, start with the <a href="https://www.paymill.com/en-gb/documentation-3/">documentation</a>.</li><li>Install the latest release.</li><li>Check the tests / samples.</li><li>Check the API <a href="https://www.paymill.com/en-gb/documentation-3/reference/api-reference/">reference</a>.</li><li>Check the full JSdoc <a href="http://paymill.github.io/paymill-js/docs/">documentation</a>.</li></ul>

<h2>Installation</h2>

<h3>Node</h3>

<p>Install the package using npm: <code>npm install paymill-wrapper</code> or <code>npm install -g paymill-wrapper</code> to install globaly. You can also add <code>paymill-wrapper</code> to your <code>package.json</code> dependecies.</p>

<p>Use the module with <code>var paymill = require(&quot;paymill-wrapper&quot;);</code>.</p>

<h3>Parse</h3>

<p>Copy <code>paymill.parse.js</code> to your your cloud code folder.</p>

<p>Use the module with <code>var paymill = require(&quot;cloud/paymill.parse.js&quot;);</code>.</p>

<h3>apiOmat</h3>

<p>In your <a href="http://www.apiomat.com">apiOmat</a> dashboard add the Modules &#39;Paymill&#39; and &#39;Server Code&#39; to use paymill function in &#39;Server Code&#39; module.
See <a href="http://www.apiomat.com/docs/modules/paymill-module/">documentation</a> of the module for further informations.</p>

<h2>Usage</h2>

<h3>Initialization</h3>

<p>Before using the wrapper you have to initialize it, using your private PAYMILL key: <code>paymill.initialize(yourApiKey);</code>.</p>

<h3>Services</h3>

<p>Each endpoint of the PAYMILL <a href="https://www.paymill.com/en-gb/documentation-3/reference/api-reference/">API</a> has a corrseponding service. For example, to access transaction functions you can use <code>paymill.transactions</code>.</p>

<p>Available methods are (depending on the service):</p>

<ul><li><strong>create ( or createXXX )</strong>
A service may include multiple create methods, depending on the parameters. You cannot create an object locally and call create with it, you have to supply the input parameters.</li><li><strong>detail</strong> 
Accepts an object or an objects id and returns an object. If the parameter is an object, the same object will be updated and returned.</li><li><strong>remove</strong>
Accepts an object or an objects id and returns an object. If the parameter is an object, the same object will be updated and returned.</li><li><strong>detail</strong>
Accepts an object or an objects id. If the parameter is an object, acts like a &quot;refresh&quot; and updates it. </li><li><strong>list</strong>
Accepts count and offset parameters for pagination, as well as order and filter. Returns a List object, which holds the global count in <code>count</code> and an array of the objects in 
<code>items</code></li></ul>

<h3>Removing, updating and retrieving</h3>

<p>When you use methods like remove, update or detail with an object as argument, the wrapper will use the response from the API to update the <strong>same</strong> object and will return the same object. If you use the id of an object as a string, the wrapper will create a new object and return it.</p>

<p>Example:</p>

<p><code>
var transaction; // some transaction you created
paymill.transactions.detail(transaction).then(function(detail){
	if (detail===transaction) {
		console.log(&quot;Wrapper works!&quot;);
	}
});
</code>
### Callbacks and promises</p>

<p>Alle service methods are asynchronous. To receive the result you either have to specify a callback function or you use the returned <a href="http://promises-aplus.github.io/promises-spec/">Promise</a>.
#### Callbacks
The last parameter of every service method is a callback. The callback will be executed after the request. The format of the callbacks is platform specific.</p>

<ul><li><strong>Node</strong> 
In Node, the wrapper expects the callback to be a function in the form <code>function(error,result)</code> .</li><li><strong>Parse</strong>
In Parse, the wrapper expects the callback to be an object in the form </li></ul>

<p><code>
var callback= {
	success: function(result) {â€¦},
	error: function(error) {..}
}
</code>
#### Promises
All service methods return an A+ compliant <a href="http://promises-aplus.github.io/promises-spec/">Promise</a>. The promise is resolved with the result or rejected with an error. You can chain promises like this:</p>

<p><code>
paymill.clients.create().then(function(client) {
	//client created, lets create a payment
	return paymill.payments.create(atoken,client);
}).then(function(payment){
	//payment created, do something with it
},function(error) {
	// an error occured
});
</code></p>

<h3>Deserialization</h3>

<p>The Wrapper deserializes all responses from the API. If you need to access the original json, all PAYMILL objects include the <code>originalJson</code> member, which holds the json used for deserialization</p>

<h2>Contributors</h2>

<h3>Getting started:</h3>

<ul><li>Install node.js</li><li>Run <code>npm install</code> to install dependencies or <code>sudo npm install -g</code> to install dependecies globally.</li><li>run <code>npm test</code> to run jshint and mocha tests. <strong>Note:</strong> you have to have a valid private key in a <code>PMAPIKEY</code> environment variable.</li><li>run <code>npm run-script docs</code> to generate documentation</li></ul>

<p>(if Error: Cannot find module X, check if $NODE_PATH is correct)</p>

<h3>Adding a new platform</h3>

<p>To add a new platform (XXX), you have to:</p>

<ul><li>Create a folder <code>libXXX</code>. </li><li>Implement an ExternalHandler. </li><li>Make sure <a href="http://underscorejs.org/">underscore.js</a> is available for your platform.</li><li>In Gruntfile.js add </li></ul>

<p><code>
XXX : {
	src : [&#39;paymill.js&#39;, &#39;lib/*.js&#39;,&#39;lib/models/*.js&#39;,&#39;lib/services/*.js&#39;,&#39;libXXX/*.js&#39;],
	dest : &#39;paymill.XXX.js&#39;,
},
</code></p>

<h2>License</h2>

<p>Copyright 2013 PAYMILL GmbH.</p>

<p>MIT License (enclosed)</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-paymill.html">paymill</a></li></ul><h3>Classes</h3><ul><li><a href="Client.html">Client</a></li><li><a href="Client.Filter.html">Filter</a></li><li><a href="Client.Order.html">Order</a></li><li><a href="ClientService.html">ClientService</a></li><li><a href="Fee.html">Fee</a></li><li><a href="Filter.html">Filter</a></li><li><a href="Offer.html">Offer</a></li><li><a href="Offer.Filter.html">Filter</a></li><li><a href="Offer.Order.html">Order</a></li><li><a href="OfferInterval.html">OfferInterval</a></li><li><a href="OfferService.html">OfferService</a></li><li><a href="Order.html">Order</a></li><li><a href="Payment.html">Payment</a></li><li><a href="Payment.Filter.html">Filter</a></li><li><a href="Payment.Order.html">Order</a></li><li><a href="PaymentService.html">PaymentService</a></li><li><a href="PaymillList.html">PaymillList</a></li><li><a href="Preauthorization.html">Preauthorization</a></li><li><a href="Preauthorization.Filter.html">Filter</a></li><li><a href="Preauthorization.Order.html">Order</a></li><li><a href="PreauthorizationService.html">PreauthorizationService</a></li><li><a href="Refund.html">Refund</a></li><li><a href="Refund.Filter.html">Filter</a></li><li><a href="Refund.Order.html">Order</a></li><li><a href="RefundService.html">RefundService</a></li><li><a href="Subscription.html">Subscription</a></li><li><a href="Subscription.Filter.html">Filter</a></li><li><a href="Subscription.Order.html">Order</a></li><li><a href="SubscriptionCount.html">SubscriptionCount</a></li><li><a href="SubscriptionService.html">SubscriptionService</a></li><li><a href="Transaction.html">Transaction</a></li><li><a href="Transaction.Filter.html">Filter</a></li><li><a href="Transaction.Order.html">Order</a></li><li><a href="TransactionService.html">TransactionService</a></li><li><a href="Webhook.html">Webhook</a></li><li><a href="Webhook.Filter.html">Filter</a></li><li><a href="Webhook.Order.html">Order</a></li><li><a href="WebhookService.html">WebhookService</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Sat Jan 25 2014 16:35:44 GMT+0200 (EET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>